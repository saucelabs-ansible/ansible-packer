sudo: required
dist: trusty

language: ruby
cache: bundler
rvm: 2.2
bundler_args: "--without integration tools maintenance"

before_install:
  - gem install bundler
  - gem update --system 2.4.5
  - gem --version
  - bundler update

env:
  - ANSIBLE_VERSION=latest
  - ANSIBLE_VERSION=1.9.4
  - ANSIBLE_VERSION=2.0.0.0
  - ANSIBLE_VERSION=2.1.0.0

install:
  - if [ "$ANSIBLE_VERSION" = "latest" ]; then pip install --no-binary ansible ansible; else pip install --no-binary ansible ansible==$ANSIBLE_VERSION; fi

script:
  - bundle exec inspec exec test/integration/default/packer_spec.rb
