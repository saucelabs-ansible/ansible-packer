sudo: required
dist: trusty

rvm: 2.2

services:
  - docker

env:
  global:
    - KITCHEN_DRIVER=docker
    - KITCHEN_PROVIDER=docker
    - KITCHEN_PLATFORM=ubuntu-14.04
  matrix:
    - ANSIBLE_VERSION=latest
    - ANSIBLE_VERSION=2.0.2
    - ANSIBLE_VERSION=1.9.6
    - ANSIBLE_VERSION-1.9.2

install:
  - bundle install --path vendor/bundle

before_script:
  - sudo iptables -L DOCKER || sudo iptables -N DOCKER

script:
  - bundle exec kitchen test

before_cache:
  - rm -f ${HOME}/.cache/pip/log/debug.log

cache:
  - bundler
  - pip

